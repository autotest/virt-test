- virsh_blkiotune:
    type = virsh_blkiotune
    libvirtd = "on"
    # qemu_path defaults "/libvirt/qemu/" on RHEL6.y, please remove it
    # on RHEL7.y or F19 testing
    qemu_path = "/libvirt/qemu/"
    variants:
        - positive_testing:
            status_error = "no"
            variants:
                - get_blkio_parameter:
                    variants:
                        - running_guest:
                            start_vm = "yes"
                            variants:
                                - options:
                                    variants:
                                        - none:
                                            options =
                                        - live:
                                            options = "live"
                                        - current:
                                            options = "current"
                        - shutoff_guest:
                            start_vm = "no"
                            variants:
                                - options:
                                    variants:
                                        - none:
                                            options =
                                        - config:
                                            options = "config"
                                        - current:
                                            options = "current"
                - set_blkio_parameter:
                    change_parameters = "yes"
                    variants:
                        - shutoff_guest:
                            start_vm = "no"
                            variants:
                                - change_weight:
                                    variants:
                                        - minimum_boundary:
                                            blkio_weight = 100
                                        - inside_boundary:
                                            blkio_weight = 500
                                        - maximum_boundary:
                                            blkio_weight = 1000
                                    variants:
                                        - options:
                                            variants:
                                                - config:
                                                    options = "config"
                                                - current:
                                                    options = "current"
                                - change_device_weights:
                                    variants:
                                        - minimum_boundary:
                                            blkio_device_weights = "/dev/sda,100"
                                        - inside_boundary:
                                            blkio_device_weights = "/dev/sda,600"
                                        - maximum_boundary:
                                            blkio_device_weights = "/dev/sda,1000"
                                        - remove_device:
                                            blkio_device_weights = "/dev/sda,0"
                                    variants:
                                        - options:
                                            variants:
                                                - config:
                                                    options = "config"
                                                - current:
                                                    options = "current"
                        - running_guest:
                            start_vm = "yes"
                            variants:
                                - change_weight:
                                    variants:
                                        - minimum_boundary:
                                            blkio_weight = 100
                                        - inside_boundary:
                                            blkio_weight = 700
                                        - maximum_boundary:
                                            blkio_weight = 1000
                                    variants:
                                        - options:
                                            variants:
                                                - live:
                                                    options = "live"
                                                - current:
                                                    options = "current"
                                - change_device_weights:
                                    variants:
                                        - minimum_boundary:
                                            blkio_device_weights = "/dev/sda,100"
                                        - inside_boundary:
                                            blkio_device_weights = "/dev/sda,800"
                                        - maximum_boundary:
                                            blkio_device_weights = "/dev/sda,1000"
                                    variants:
                                        - options:
                                            variants:
                                                - live:
                                                    options = "live"
                                                - current:
                                                    options = "current"
        - negative_testing:
            status_error = "yes"
            variants:
                - get_blkio_parameter:
                    variants:
                        - running_guest:
                            start_vm = "yes"
                            variants:
                                - options:
                                    variants:
                                        - invalid:
                                            options = "hello"
                                # only valid on RHEL6.y, please remove it on RHEL7.y or F19 testing
                                - cgroup:
                                    variants:
                                        - stop:
                                            cgconfig = "off"
                                            libvirtd = "restart"
                        - shutoff_guest:
                            start_vm = "no"
                            variants:
                                - options:
                                    variants:
                                        - invalid:
                                            options = "hello"
                                        - live:
                                            options = "live"
                - set_blkio_parameter:
                    change_parameters = "yes"
                    variants:
                        - running_guest:
                            start_vm = "yes"
                            variants:
                                - change_weight:
                                    variants:
                                        - lower_boundary:
                                            blkio_weight = 99
                                        - upper_boundary:
                                            blkio_weight = 1001
                                        - invalid_value:
                                            blkio_weight = "~@#$%^-=_:,.[]{}"
                                    variants:
                                        - options:
                                            variants:
                                                - live:
                                                    options = "live"
                                - change_device_weights:
                                    variants:
                                        - lower_boundary:
                                            blkio_device_weights = /dev/sda,-1
                                        - upper_boundary:
                                            blkio_device_weights = /dev/sda,1001
                                        - invalid_device_and_lower_boundary:
                                            blkio_device_weights = /dev/vda, 99
                                        - invalid_value:
                                            blkio_device_weights = "~@#$%^-=_:,.[]{}"
                                    variants:
                                        - options:
                                            variants:
                                                - config:
                                                    options = "live"
                                                - current:
                                                    options = "current"
                                # only valid on RHEL6.y, please remove it on RHEL7.y or F19 testing
                                - cgroup:
                                    variants:
                                        - stop:
                                            cgconfig = "off"
                                            libvirtd = "restart"
                        - shutoff_guest:
                            start_vm = "no"
                            variants:
                                - change_weight:
                                    variants:
                                        - lower_boundary:
                                            blkio_weight = 99
                                        - upper_boundary:
                                            blkio_weight = 1001
                                        - invalid_value:
                                            blkio_weight = "~@#$%^-=_:,.[]{}"
                                    variants:
                                        - options:
                                            variants:
                                                - none:
                                                    options =
                                                - live:
                                                    options = "live"
                                                - config:
                                                    options = "config"
                                                - current:
                                                    options = "current"
                                - change_device_weights:
                                    variants:
                                        - lower_boundary:
                                            blkio_device_weights = /dev/sda,-1
                                        # FIXME, libvirt will check error when starting VM
                                        #- upper_boundary:
                                        #    blkio_device_weights = /dev/sda,1001
                                        #- invalid_device_and_lower_boundary:
                                        #    blkio_device_weights = /dev/vda, 99
                                        - invalid_value:
                                            blkio_device_weights = "~@#$%^-=_:,.[]{}"
                                    variants:
                                        - options:
                                            variants:
                                                - none:
                                                    options =
                                                - live:
                                                    options = "live"
                                                - config:
                                                    options = "config"
                                                - current:
                                                    options = "current"

