- block_resize:
    # As XP and 2003 guest disk manager not support disk shrink. So don't test them for this feature
    no WinXP Win2003
    only qcow2 raw
    type = block_resize
    images += " data"
    image_size_data = 15G
    image_name_data = images/data
    create_image_data = yes
    force_create_image_data = yes
    block_size_cmd = "fdisk -l|grep /dev/*db"
    block_size_pattern = ",\s+(\d+\s+b)ytes"
    disk_change_ratio = "1.5 0.5"
    guest_prepare_cmd = ""
    Windows:
        block_size_cmd = wmic diskdrive get size, index
        block_size_pattern = "1\s+(\d+)"
        accept_ratio = 0.0005
        guest_prepare_cmd_equal = "echo select disk 1 > cmd && echo create partition primary >> cmd && echo select partition 1 >> cmd && echo format fs=ntfs quick >> cmd && echo assign letter=E >> cmd && echo exit >> cmd && diskpart /s cmd"
        disk_update_cmd = "echo select disk 1 > cmd && echo select partition 1 >> cmd && echo extend >> cmd && echo exit >> cmd && diskpart /s cmd::echo select disk 1 > cmd && echo select partition 1 >> cmd && echo shrink desired=DISK_CHANGE_SIZE >> cmd && echo exit >> cmd && diskpart /s cmd"
        disk_unit = M
