- fio_linux:
    only Linux
    type = fio
    writefile_cmd = echo
    kill_vm = yes
    cmd_timeout = 9600
    io_pattern = ".*?\s{2}[read|write].*?bw=(\d+(?:\.\d+)?[\w|\s]B/s),\siops=(\d+)\s.*?"
    laten_pattern = "\s{5}lat\s\((\wsec)\).*?avg=[\s]?(\d+(?:[\.][\d]+)?).*?"
    order_list = "Block_size Iodepth Threads BW(MB/S) IOPS Latency(ms) Host_CPU BW/CPU KVM_Exits Util%"
    rw = "read write randread randwrite randrw"
    block_size = "4k 16k 64k 256k"
    iodepth = "1 8 64"
    threads = "16"
    guest_ver_cmd = "uname -r"
    fio_file = fio-2.0.15.tar.bz2
    compile_cmd = "make && make install"
    format_disk = no
    drive_cache = none
    image_snapshot = no
    guest_result_file = /tmp/fio_result
    variants:
        - single_disk:
            images += " disk1"
            variants:
                - filesystem:
                    image_name_disk1 = images/storage2
                    image_raw_device_disk1 = no
                    image_size_disk1 = 40G
                    drive_bus_disk1 = 1
                    force_create_image = yes
                    force_create_image_image1 = no
                    remove_image_disk1 = yes
                    image_aio = threads
                    format_disk_cmd = "i=`/bin/ls /dev/[vs]db` &&  mkfs.ext4 $i > /dev/null; partprobe; umount /mnt; mount $i /mnt && echo 3 > /proc/sys/vm/drop_caches && sleep 3"
                    fio_cmd = "fio --rw=%s --bs=%s --iodepth=%s --runtime=1m --direct=1 --filename=/mnt/%s --name=job1 --ioengine=libaio --thread --group_reporting --numjobs=%s --size=512MB --time_based --ioscheduler=deadline --output=/tmp/fio_result &> /dev/null"
                    format_disk = yes
                - rawdisk:
                    image_aio = native
                    boot_drive_disk1 = yes
                    image_name_disk1 = /dev/ram0
                    image_raw_device_disk1 = yes
                    fio_cmd = "fio --rw=%s --bs=%s --iodepth=%s --runtime=1m --direct=1 --filename=/dev/sdb --name=job1 --ioengine=libaio --thread --group_reporting --numjobs=%s --size=512MB --time_based --ioscheduler=deadline --output=/tmp/fio_result &> /dev/null"
        - multi_disk:
            images += " disk0 disk1 disk2 disk3 disk4 disk5 disk6 disk7"
            image_name_disk0 = /dev/ram0
            image_raw_device_disk0 = yes
            image_name_disk1 = /dev/ram1
            image_raw_device_disk1 = yes
            image_name_disk2 = /dev/ram2
            image_raw_device_disk2 = yes
            image_name_disk3 = /dev/ram3
            image_raw_device_disk3 = yes
            image_name_disk4 = /dev/ram4
            image_raw_device_disk4 = yes
            image_name_disk5 = /dev/ram5
            image_raw_device_disk5 = yes
            image_name_disk6 = /dev/ram6
            image_raw_device_disk6 = yes
            image_name_disk7 = /dev/ram7
            image_raw_device_disk7 = yes
            image_aio = native
            variants:
                - rawdisk:
                    fio_cmd = "fio --name=global --description=high_iops --rw=%s --bs=%s --iodepth=%s --runtime=1m --direct=1 -thread --group_reporting --numjobs=%s --time_based --size=512MB --ioscheduler=deadline --ioengine=libaio --name=job1 --filename=/dev/sdb --name=job2 --filename=/dev/sdc --name=job3 --filename=/dev/sdd --name=job4 --filename=/dev/sde --name=job5 --filename=/dev/sdf --name=job6 --filename=/dev/sdg --name=job7 --filename=/dev/sdh --name=job8 --filename=/dev/sdi --output=/tmp/fio_result &> /dev/null"
